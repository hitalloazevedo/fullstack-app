{"ast":null,"code":"import addProduct from\"../utils/addProduct\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router\";import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Cadastrar(){const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem('jwt');if(!token){navigate('/login');}else{const user=jwt.decode(token);console.log(user);if(!user){localStorage.removeItem('jwt');navigate('/login');}}},[navigate]);const[data,setData]=useState({codeInput:'',descriptionInput:'',sizeInput:''});function handle(e){const newData={...data};newData[e.target.id]=e.target.value;setData(newData);}async function submit(e){e.preventDefault();const res=await addProduct(data.codeInput,data.descriptionInput,data.sizeInput);console.log(res);if((res===null||res===void 0?void 0:res.code)==='23505'){window.alert('produto já cadastrado');}if((res===null||res===void 0?void 0:res.msg)==='created'){window.alert('produto cadastrado com sucesso');}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{id:\"new-item-form\",onSubmit:async e=>await submit(e),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cadastrar Produto\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"codeInput\",children:\"C\\xF3digo\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>handle(e),type:\"number\",id:\"codeInput\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"descriptionInput\",children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>handle(e),type:\"text\",id:\"descriptionInput\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sizeInput\",children:\"Tamanho\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>handle(e),type:\"text\",id:\"sizeInput\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",id:\"btnSend\",value:\"Cadastrar\"})})]})});}","map":{"version":3,"names":["addProduct","useState","useEffect","useNavigate","jwt","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cadastrar","navigate","token","localStorage","getItem","user","decode","console","log","removeItem","data","setData","codeInput","descriptionInput","sizeInput","handle","e","newData","target","id","value","submit","preventDefault","res","code","window","alert","msg","children","onSubmit","className","htmlFor","onChange","type"],"sources":["C:/Users/azeve/OneDrive/Área de Trabalho/fullstack-app/client/src/routes/Cadastrar.js"],"sourcesContent":["import addProduct from \"../utils/addProduct\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useNavigate } from \"react-router\"\r\nimport jwt from 'jsonwebtoken'\r\n\r\n\r\nexport default function Cadastrar() {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('jwt')\r\n        if (!token) {\r\n            navigate('/login')\r\n        } else {\r\n            const user = jwt.decode(token)\r\n            console.log(user)\r\n            if (!user) {\r\n                localStorage.removeItem('jwt')\r\n                navigate('/login')    \r\n            }\r\n        }\r\n    },[navigate])\r\n\r\n    const [data, setData] = useState({\r\n        codeInput: '',\r\n        descriptionInput: '',\r\n        sizeInput: ''\r\n    })\r\n\r\n    function handle(e) {\r\n        const newData = {...data}\r\n        newData[e.target.id] = e.target.value\r\n        setData(newData)\r\n    }\r\n\r\n    async function submit(e) {\r\n        e.preventDefault()\r\n        const res = await addProduct(data.codeInput, data.descriptionInput, data.sizeInput)\r\n        console.log(res)\r\n\r\n        if (res?.code === '23505') {\r\n            window.alert('produto já cadastrado')\r\n        } \r\n\r\n        if (res?.msg === 'created') {\r\n            window.alert('produto cadastrado com sucesso')\r\n        }\r\n    } \r\n\r\n    return (\r\n        <>\r\n            <form id=\"new-item-form\" onSubmit={async (e) => await submit(e)}>\r\n                <h2>Cadastrar Produto</h2>\r\n                <div className=\"input-field\">\r\n                    <label htmlFor=\"codeInput\">Código</label>\r\n                    <input onChange={(e) => handle(e)} type=\"number\" id=\"codeInput\"/>\r\n                    <label htmlFor=\"descriptionInput\">Descrição</label>\r\n                    <input onChange={(e) => handle(e)} type=\"text\" id=\"descriptionInput\"/>\r\n                    <label htmlFor=\"sizeInput\">Tamanho</label>\r\n                    <input onChange={(e) => handle(e)} type=\"text\" id=\"sizeInput\"/>\r\n                </div>\r\n                <div className=\"button-field\">\r\n                    <input type=\"submit\" id=\"btnSend\" value=\"Cadastrar\"/>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}"],"mappings":"AAAA,MAAO,CAAAA,UAAU,KAAM,qBAAqB,CAC5C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,cAAc,CAC1C,MAAO,CAAAC,GAAG,KAAM,cAAc,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAG9B,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAEhC,KAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAW,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CACzC,GAAI,CAACF,KAAK,CAAE,CACRD,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,IAAM,CACH,KAAM,CAAAI,IAAI,CAAGZ,GAAG,CAACa,MAAM,CAACJ,KAAK,CAAC,CAC9BK,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CACjB,GAAI,CAACA,IAAI,CAAE,CACPF,YAAY,CAACM,UAAU,CAAC,KAAK,CAAC,CAC9BR,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CACJ,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAEb,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGrB,QAAQ,CAAC,CAC7BsB,SAAS,CAAE,EAAE,CACbC,gBAAgB,CAAE,EAAE,CACpBC,SAAS,CAAE,EACf,CAAC,CAAC,CAEF,QAAS,CAAAC,MAAMA,CAACC,CAAC,CAAE,CACf,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAGP,IAAI,CAAC,CACzBO,OAAO,CAACD,CAAC,CAACE,MAAM,CAACC,EAAE,CAAC,CAAGH,CAAC,CAACE,MAAM,CAACE,KAAK,CACrCT,OAAO,CAACM,OAAO,CAAC,CACpB,CAEA,cAAe,CAAAI,MAAMA,CAACL,CAAC,CAAE,CACrBA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAlC,UAAU,CAACqB,IAAI,CAACE,SAAS,CAAEF,IAAI,CAACG,gBAAgB,CAAEH,IAAI,CAACI,SAAS,CAAC,CACnFP,OAAO,CAACC,GAAG,CAACe,GAAG,CAAC,CAEhB,GAAI,CAAAA,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEC,IAAI,IAAK,OAAO,CAAE,CACvBC,MAAM,CAACC,KAAK,CAAC,uBAAuB,CAAC,CACzC,CAEA,GAAI,CAAAH,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEI,GAAG,IAAK,SAAS,CAAE,CACxBF,MAAM,CAACC,KAAK,CAAC,gCAAgC,CAAC,CAClD,CACJ,CAEA,mBACI/B,IAAA,CAAAI,SAAA,EAAA6B,QAAA,cACI/B,KAAA,SAAMsB,EAAE,CAAC,eAAe,CAACU,QAAQ,CAAE,KAAO,CAAAb,CAAC,EAAK,KAAM,CAAAK,MAAM,CAACL,CAAC,CAAE,CAAAY,QAAA,eAC5DjC,IAAA,OAAAiC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1B/B,KAAA,QAAKiC,SAAS,CAAC,aAAa,CAAAF,QAAA,eACxBjC,IAAA,UAAOoC,OAAO,CAAC,WAAW,CAAAH,QAAA,CAAC,WAAM,CAAO,CAAC,cACzCjC,IAAA,UAAOqC,QAAQ,CAAGhB,CAAC,EAAKD,MAAM,CAACC,CAAC,CAAE,CAACiB,IAAI,CAAC,QAAQ,CAACd,EAAE,CAAC,WAAW,CAAC,CAAC,cACjExB,IAAA,UAAOoC,OAAO,CAAC,kBAAkB,CAAAH,QAAA,CAAC,iBAAS,CAAO,CAAC,cACnDjC,IAAA,UAAOqC,QAAQ,CAAGhB,CAAC,EAAKD,MAAM,CAACC,CAAC,CAAE,CAACiB,IAAI,CAAC,MAAM,CAACd,EAAE,CAAC,kBAAkB,CAAC,CAAC,cACtExB,IAAA,UAAOoC,OAAO,CAAC,WAAW,CAAAH,QAAA,CAAC,SAAO,CAAO,CAAC,cAC1CjC,IAAA,UAAOqC,QAAQ,CAAGhB,CAAC,EAAKD,MAAM,CAACC,CAAC,CAAE,CAACiB,IAAI,CAAC,MAAM,CAACd,EAAE,CAAC,WAAW,CAAC,CAAC,EAC9D,CAAC,cACNxB,IAAA,QAAKmC,SAAS,CAAC,cAAc,CAAAF,QAAA,cACzBjC,IAAA,UAAOsC,IAAI,CAAC,QAAQ,CAACd,EAAE,CAAC,SAAS,CAACC,KAAK,CAAC,WAAW,CAAC,CAAC,CACpD,CAAC,EACJ,CAAC,CACT,CAAC,CAEX"},"metadata":{},"sourceType":"module","externalDependencies":[]}