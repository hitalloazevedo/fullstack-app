{"ast":null,"code":"import{useEffect,useState}from\"react\";import loadInputContent from\"../utils/loadInputContent\";import editProduct from\"../utils/editProduct\";import LoadData from\"../utils/loadData\";import{useNavigate}from\"react-router\";import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Edit(){const url=new URL(window.location.href);const id=url.searchParams.get('id');const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem('jwt');if(!token){navigate('/login');}else{const user=jwt.decode(token);console.log(user);if(!user){localStorage.removeItem('jwt');navigate('/login');}window.addEventListener('load',async()=>{const codField=document.querySelector('#codeInput');const descriptionField=document.querySelector('#descriptionInput');const sizeField=document.querySelector('#sizeInput');loadInputContent(codField,descriptionField,sizeField,id);const res=await LoadData(id);console.log(res);const resData={codeInput:res.cod,descriptionInput:res.description,sizeInput:res.size};setData(resData);});}},[navigate,id]);const[data,setData]=useState({codeInput:'',descriptionInput:'',sizeInput:''});function submit(e,id){e.preventDefault();editProduct(data.codeInput,data.descriptionInput,data.sizeInput,id);}function handle(e){const newData={...data};newData[e.target.id]=e.target.value;setData(newData);}// window.addEventListener('load', async () => {\n//     const res = await LoadData(id)\n//     const resData = {\n//             codeInput: res.cod,\n//             descriptionInput: res.description,\n//             sizeInput: res.size\n//     }\n//     setData(resData)\n// })\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{id:\"new-item-form\",onSubmit:async e=>await submit(e,id),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Editar Produto\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"codeInput\",children:\"C\\xF3digo\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>handle(e),type:\"number\",id:\"codeInput\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"descriptionInput\",children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>handle(e),type:\"text\",id:\"descriptionInput\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sizeInput\",children:\"Tamanho\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>handle(e),type:\"text\",id:\"sizeInput\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",id:\"btnSend\",value:\"Editar\"})})]})});}","map":{"version":3,"names":["useEffect","useState","loadInputContent","editProduct","LoadData","useNavigate","jwt","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Edit","url","URL","window","location","href","id","searchParams","get","navigate","token","localStorage","getItem","user","decode","console","log","removeItem","addEventListener","codField","document","querySelector","descriptionField","sizeField","res","resData","codeInput","cod","descriptionInput","description","sizeInput","size","setData","data","submit","e","preventDefault","handle","newData","target","value","children","onSubmit","className","htmlFor","onChange","type"],"sources":["C:/Users/azeve/OneDrive/Área de Trabalho/fullstack-app/client/src/routes/Edit.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport loadInputContent from \"../utils/loadInputContent\"\r\nimport editProduct from \"../utils/editProduct\"\r\nimport LoadData from \"../utils/loadData\"\r\nimport { useNavigate } from \"react-router\"\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport default function Edit() {\r\n    const url = new URL(window.location.href)\r\n    const id = url.searchParams.get('id')\r\n    \r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('jwt')\r\n        if (!token) {\r\n            navigate('/login')\r\n        } else {\r\n            const user = jwt.decode(token)\r\n            console.log(user)\r\n            if (!user) {\r\n                localStorage.removeItem('jwt')\r\n                navigate('/login')    \r\n            }\r\n\r\n            window.addEventListener('load', async () => {\r\n                const codField = document.querySelector('#codeInput')\r\n                const descriptionField = document.querySelector('#descriptionInput')\r\n                const sizeField = document.querySelector('#sizeInput')\r\n                loadInputContent(codField, descriptionField, sizeField, id)\r\n\r\n                const res = await LoadData(id)\r\n                console.log(res)\r\n\r\n                const resData = {\r\n                            codeInput: res.cod,\r\n                            descriptionInput: res.description,\r\n                            sizeInput: res.size\r\n                }\r\n\r\n                setData(resData)\r\n            })\r\n        }\r\n    }, [navigate, id])\r\n\r\n    const [data, setData] = useState({\r\n        codeInput: '',\r\n        descriptionInput: '',\r\n        sizeInput: ''\r\n    })\r\n\r\n    function submit(e, id) {\r\n        e.preventDefault()\r\n        editProduct(data.codeInput, data.descriptionInput, data.sizeInput, id)\r\n    }\r\n\r\n    function handle(e) {\r\n        const newData = {...data}\r\n        newData[e.target.id] = e.target.value\r\n        setData(newData)\r\n    }\r\n\r\n    // window.addEventListener('load', async () => {\r\n    //     const res = await LoadData(id)\r\n    //     const resData = {\r\n    //             codeInput: res.cod,\r\n    //             descriptionInput: res.description,\r\n    //             sizeInput: res.size\r\n    //     }\r\n    //     setData(resData)\r\n    // })\r\n\r\n    return (\r\n        <>\r\n            <form id=\"new-item-form\" onSubmit={async (e) => await submit(e, id)}>\r\n                <h2>Editar Produto</h2>\r\n                <div className=\"input-field\">\r\n                    <label htmlFor=\"codeInput\">Código</label>\r\n                    <input onChange={(e) => handle(e)} type=\"number\" id=\"codeInput\"/>\r\n                    <label htmlFor=\"descriptionInput\">Descrição</label>\r\n                    <input onChange={(e) => handle(e)} type=\"text\" id=\"descriptionInput\"/>\r\n                    <label htmlFor=\"sizeInput\">Tamanho</label>\r\n                    <input onChange={(e) => handle(e)} type=\"text\" id=\"sizeInput\"/>\r\n                </div>\r\n                <div className=\"button-field\">\r\n                    <input type=\"submit\" id=\"btnSend\" value=\"Editar\"/>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}