{"ast":null,"code":"import{useEffect}from\"react\";import render from\"../utils/render\";import deleteProduct from\"../utils/deleteProduct\";import getProducts from\"../utils/getProducts\";import newProduct from'../utils/newProduct';import{useNavigate}from\"react-router\";import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function RenderProducts(){const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem('jwt');if(!token){navigate('/login');}else{const user=jwt.decode(token);console.log(user);const display=document.querySelector('.display');getProducts().then(products=>{render(products,display,newProduct);});display.addEventListener('click',async e=>{e.preventDefault();const row=e.target.closest('[data-id]');const id=row.dataset.id;if(e.target.classList.contains('botao-simples--excluir')){const res=await deleteProduct(id);console.log(res);if(res.message=='deleted!'){row.remove();window.alert('Produto deletado com sucesso!');}}else{if(e.target.classList.contains('botao-simples--editar')){window.location.href=\"../editar?id=\".concat(id);}}});if(!user){localStorage.removeItem('jwt');navigate('/login');}}},[navigate]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Cod.\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Tamanho\"}),/*#__PURE__*/_jsx(\"td\",{children:\"A\\xE7\\xE3o\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"display\"})]})});}","map":{"version":3,"names":["useEffect","render","deleteProduct","getProducts","newProduct","useNavigate","jwt","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RenderProducts","navigate","token","localStorage","getItem","user","decode","console","log","display","document","querySelector","then","products","addEventListener","e","preventDefault","row","target","closest","id","dataset","classList","contains","res","message","remove","window","alert","location","href","concat","removeItem","children","className"],"sources":["C:/Users/azeve/OneDrive/Área de Trabalho/fullstack-app/client/src/components/RenderProducts.js"],"sourcesContent":["import { useEffect } from \"react\"\r\nimport render from \"../utils/render\"\r\nimport deleteProduct from \"../utils/deleteProduct\"\r\nimport getProducts from \"../utils/getProducts\"\r\nimport newProduct from '../utils/newProduct'\r\nimport { useNavigate } from \"react-router\"\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport default function RenderProducts() {\r\n\r\n    const navigate = useNavigate()\r\n    \r\n    useEffect(() => {\r\n        const token = localStorage.getItem('jwt')\r\n        if (!token) {\r\n            navigate('/login')\r\n        } else {\r\n            const user = jwt.decode(token)\r\n            console.log(user)\r\n\r\n            const display = document.querySelector('.display')\r\n        \r\n            getProducts().then(products => {\r\n                render(products, display, newProduct)\r\n            })\r\n    \r\n            display.addEventListener('click', async (e) => {\r\n                e.preventDefault()\r\n            \r\n                const row = e.target.closest('[data-id]')\r\n                const id = row.dataset.id\r\n                \r\n                if (e.target.classList.contains('botao-simples--excluir')) {\r\n                    const res = await deleteProduct(id)\r\n                    console.log(res)\r\n                    \r\n                    if (res.message == 'deleted!') {\r\n                            row.remove()\r\n                            window.alert('Produto deletado com sucesso!')\r\n                        }\r\n                    } \r\n                    else {\r\n                        if (e.target.classList.contains('botao-simples--editar')) {\r\n                            window.location.href = `../editar?id=${id}`\r\n                        }\r\n                }\r\n            })\r\n\r\n            if (!user) {\r\n                localStorage.removeItem('jwt')\r\n                navigate('/login')    \r\n            }\r\n        }\r\n    },[navigate])\r\n\r\n    return (\r\n        <>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <td>Cod.</td>\r\n                        <td>Descrição</td>\r\n                        <td>Tamanho</td>\r\n                        <td>Ação</td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"display\">\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    )\r\n}"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,MAAO,CAAAC,MAAM,KAAM,iBAAiB,CACpC,MAAO,CAAAC,aAAa,KAAM,wBAAwB,CAClD,MAAO,CAAAC,WAAW,KAAM,sBAAsB,CAC9C,MAAO,CAAAC,UAAU,KAAM,qBAAqB,CAC5C,OAASC,WAAW,KAAQ,cAAc,CAC1C,MAAO,CAAAC,GAAG,KAAM,cAAc,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE9B,cAAe,SAAS,CAAAC,cAAcA,CAAA,CAAG,CAErC,KAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9BL,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAe,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CACzC,GAAI,CAACF,KAAK,CAAE,CACRD,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,IAAM,CACH,KAAM,CAAAI,IAAI,CAAGZ,GAAG,CAACa,MAAM,CAACJ,KAAK,CAAC,CAC9BK,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CAEjB,KAAM,CAAAI,OAAO,CAAGC,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC,CAElDrB,WAAW,CAAC,CAAC,CAACsB,IAAI,CAACC,QAAQ,EAAI,CAC3BzB,MAAM,CAACyB,QAAQ,CAAEJ,OAAO,CAAElB,UAAU,CAAC,CACzC,CAAC,CAAC,CAEFkB,OAAO,CAACK,gBAAgB,CAAC,OAAO,CAAE,KAAO,CAAAC,CAAC,EAAK,CAC3CA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,KAAM,CAAAC,GAAG,CAAGF,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC,CACzC,KAAM,CAAAC,EAAE,CAAGH,GAAG,CAACI,OAAO,CAACD,EAAE,CAEzB,GAAIL,CAAC,CAACG,MAAM,CAACI,SAAS,CAACC,QAAQ,CAAC,wBAAwB,CAAC,CAAE,CACvD,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAnC,aAAa,CAAC+B,EAAE,CAAC,CACnCb,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC,CAEhB,GAAIA,GAAG,CAACC,OAAO,EAAI,UAAU,CAAE,CACvBR,GAAG,CAACS,MAAM,CAAC,CAAC,CACZC,MAAM,CAACC,KAAK,CAAC,+BAA+B,CAAC,CACjD,CACJ,CAAC,IACI,CACD,GAAIb,CAAC,CAACG,MAAM,CAACI,SAAS,CAACC,QAAQ,CAAC,uBAAuB,CAAC,CAAE,CACtDI,MAAM,CAACE,QAAQ,CAACC,IAAI,iBAAAC,MAAA,CAAmBX,EAAE,CAAE,CAC/C,CACR,CACJ,CAAC,CAAC,CAEF,GAAI,CAACf,IAAI,CAAE,CACPF,YAAY,CAAC6B,UAAU,CAAC,KAAK,CAAC,CAC9B/B,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CACJ,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAEb,mBACIN,IAAA,CAAAI,SAAA,EAAAkC,QAAA,cACIpC,KAAA,UAAAoC,QAAA,eACItC,IAAA,UAAAsC,QAAA,cACIpC,KAAA,OAAAoC,QAAA,eACItC,IAAA,OAAAsC,QAAA,CAAI,MAAI,CAAI,CAAC,cACbtC,IAAA,OAAAsC,QAAA,CAAI,iBAAS,CAAI,CAAC,cAClBtC,IAAA,OAAAsC,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBtC,IAAA,OAAAsC,QAAA,CAAI,YAAI,CAAI,CAAC,EACb,CAAC,CACF,CAAC,cACRtC,IAAA,UAAOuC,SAAS,CAAC,SAAS,CACnB,CAAC,EACL,CAAC,CACV,CAAC,CAEX"},"metadata":{},"sourceType":"module","externalDependencies":[]}